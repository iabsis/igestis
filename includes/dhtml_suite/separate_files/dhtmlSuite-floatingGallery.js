if(!window.DHTMLSuite)var DHTMLSuite=new Object();DHTMLSuite.floatingGallery=function(){var collectionModel;var layoutCSS;var divElement;var divElementImageBoxes;var idOfParentElementToGallery;var callBackFunction_onClick;var callBackFunction_onDblClick;var callBackFunction_onMouseOver;var callBackFunction_onMouseMove;var imageSelectionObj;var objectIndex;this.layoutCSS='floating-gallery.css';this.divElementImageBoxes=new Array();try{if(!standardObjectsCreated)DHTMLSuite.createStandardObjects()}catch(e){alert('Include the dhtmlSuite-common.js file')}
this.objectIndex=DHTMLSuite.variableStorage.arrayDSObjects.length;DHTMLSuite.variableStorage.arrayDSObjects[this.objectIndex]=this}
DHTMLSuite.floatingGallery.prototype=
{setMediaCollectionRef:function(mediaCollectionRef){this.collectionModel=mediaCollectionRef},init:function(){try{DHTMLSuite.commonObj.loadCSS(this.layoutCSS)}catch(e){alert('loadCSS method missing. Include dhtmlSuite-common.js')}
this.__createMainDivEl();this.__createImageBoxes();this.__initiallyHandleimageSelection()},setTargetId:function(idOfParentElementToGallery){this.idOfParentElementToGallery=idOfParentElementToGallery},setCallBackFunctionOnClick:function(functionName){this.callBackFunction_onClick=functionName},setCallBackFunctionOnDblClick:function(functionName){this.callBackFunction_onDblClick=functionName},setCallBackFunctionOnMouseOver:function(functionName){this.callBackFunction_onMouseOver=functionName},setCallBackFunctionOnMouseMove:function(functionName){this.callBackFunction_onMouseMove=functionName},deleteImageFromGallery:function(idOfImage){var retId=this.collectionModel.__removeImage(idOfImage);if(retId){var obj=document.getElementById(retId);DHTMLSuite.discardElement(obj)}else{for(var no=0;no<this.divElementImageBoxes.length;no++){if(this.divElementImageBoxes[no].id==idOfImage){var mediaRefId=this.divElementImageBoxes[no].getAttribute('mediaRefId');if(!mediaRefId)mediaRefId=this.divElementImageBoxes[no].mediaRefId;var mediaRef=this.collectionModel.getMediaById(mediaRefId);this.collectionModel.__removeImage(mediaRef.id);DHTMLSuite.discardElement(this.divElementImageBoxes[no])}}}},destroy:function(){DHTMLSuite.discardElement(this.divElement)},addImageSelectionObject:function(imageSelectionObj){this.imageSelectionObj=imageSelectionObj},__createMainDivEl:function(){this.divElement=document.createElement('DIV');this.divElement.className='DHTMLSuite_floatingGalleryContainer';if(this.idOfParentElementToGallery)
document.getElementById(this.idOfParentElementToGallery).appendChild(this.divElement);else
document.body.appendChild(this.divElement)},__createImageBoxes:function(){var ind=this.objectIndex;for(var no=0;no<this.collectionModel.mediaObjects.length;no++){this.divElementImageBoxes[no]=document.createElement('DIV');this.divElementImageBoxes[no].className='DHTMLSuite_floatingGalleryImageBox';this.divElementImageBoxes[no].id=this.collectionModel.mediaObjects[no].id;this.divElementImageBoxes[no].style.backgroundImage='url("'+this.collectionModel.mediaObjects[no].thumbnailPath+'")';this.divElementImageBoxes[no].setAttribute('mediaRefId',this.collectionModel.mediaObjects[no].id);this.divElementImageBoxes[no].mediaRefId=this.collectionModel.mediaObjects[no].id;this.divElement.appendChild(this.divElementImageBoxes[no]);var titleDiv=document.createElement('DIV');titleDiv.className='DHTMLSuite_floatingGalleryImageTitle';titleDiv.innerHTML=this.collectionModel.mediaObjects[no].title;this.divElementImageBoxes[no].appendChild(titleDiv);if(this.callBackFunction_onClick)eval("DHTMLSuite.commonObj.addEvent(this.divElementImageBoxes[no],'click',function(){DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__parseCallBackFunction('click',"+no+")});");if(this.callBackFunction_onDblClick)eval("DHTMLSuite.commonObj.addEvent(this.divElementImageBoxes[no],'dblclick',function(){DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__parseCallBackFunction('dblClick',"+no+")});");if(this.callBackFunction_onMouseOver)eval("DHTMLSuite.commonObj.addEvent(this.divElementImageBoxes[no],'mouseover',function(){DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__parseCallBackFunction('mouseOver',"+no+")});");if(this.callBackFunction_onMouseMove)eval("DHTMLSuite.commonObj.addEvent(this.divElementImageBoxes[no],'mousemove',function(){DHTMLSuite.variableStorage.arrayDSObjects["+ind+"].__parseCallBackFunction('mouseOver',"+no+")});")}
var clearingDiv=document.createElement('DIV');clearingDiv.style.clear='both';this.divElement.appendChild(clearingDiv)},__parseCallBackFunction:function(action,mediaIndex){var callBackString=false;switch(action){case "click":callBackString=this.callBackFunction_onClick;break;case "dblClick":callBackString=this.callBackFunction_onDblClick;break;case "mouseOver":callBackString=this.callBackFunction_onMouseOver;break;case "mouseMove":callBackString=this.callBackFunction_onMouseMove;break}
if(callBackString)callBackString=callBackString+'(this.collectionModel.mediaObjects['+mediaIndex+'])';if(!callBackString)return;try{eval(callBackString)}catch(e){alert('Error in callback :\n'+callBackString+'\n'+e.message)}},__initiallyHandleimageSelection:function(){if(!this.imageSelectionObj)return;this.imageSelectionObj.__setMediaCollectionModelReference(this.collectionModel);for(var no=0;no<this.divElementImageBoxes.length;no++){this.imageSelectionObj.addSelectableElement(this.divElementImageBoxes[no]);this.divElementImageBoxes[no].onselectstart=function(){return false};DHTMLSuite.commonObj.__addEventEl(this.divElementImageBoxes[no]);var subs=this.divElementImageBoxes[no].getElementsByTagName('*');for(var no2=0;no2<subs.length;no2++){subs[no2].onselectstart=function(){return false};DHTMLSuite.commonObj.__addEventEl(subs[no2])}}}}